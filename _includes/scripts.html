<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script>window.jQuery || document.write('<script src="{{ site.url }}/assets/js/vendor/jquery-1.9.1.min.js"><\/script>')</script>
<script src="{{ site.url }}/assets/js/scripts.min.js"></script>
{% if site.search %}
<!-- Jekyll Simple Search option -->
<script>
  $(document).ready(function() {
      $('.search-field').simpleJekyllSearch({
          jsonFile : '{{ site.url }}/search.json',
          searchResults : '.search-results',
          template : '<li><article><a href="{url}">{title} <span class="entry-date"><time datetime="{date}">{shortdate}</time></span></a></article></li>',
          noResults: '<p>Nothing found.</p>'
        });
  });

  (function( $, window, undefined ) {
    
     var bs = {
          close: $(".icon-remove-sign"),
          searchform: $(".search-form"),
          canvas: $("body"),
          dothis: $('.dosearch')
      };
    
    bs.dothis.on('click', function() {
      $('.search-wrapper').css({ display: "block" });
      bs.searchform.toggleClass('active');
      bs.searchform.find('input').focus();
      bs.canvas.toggleClass('search-overlay');
    });
    
      bs.close.on('click', function() {
        $('.search-wrapper').removeAttr( 'style' );
        bs.searchform.toggleClass('active');
        bs.canvas.removeClass('search-overlay');
    });
  })( jQuery, window );
</script>
{% endif %}
{% if site.google_analytics %}
<!-- Asynchronous Google Analytics snippet -->
<script>
  var _gaq = _gaq || [];
  var pluginUrl = 
 '//www.google-analytics.com/plugins/ga/inpage_linkid.js';
  _gaq.push(['_require', 'inpage_linkid', pluginUrl]);
  _gaq.push(['_setAccount', '{{ site.google_analytics }}']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>
<script src="{{ site.url }}/assets/js/vendor/highlight.pack.js"></script>
<script>hljs.initHighlightingOnLoad();</script>
{% endif %}

<script>
  (function(){
    var submitEmail = function () {
      $(".subscribe").click(function(e){
        console.log(this)
        var context = $(this).closest(".calltoaction")
        var first = context.children().find(".firstName").val()
        var last = context.children().find(".lastName").val()
        var email = context.children().find(".studentEmail").val()
        var twitter = context.children().find(".twitterHandle").val()
        if ( email.length === 0) {return false;}
        $.ajax({
          crossDomain: true,
          type: "POST",
          url: "https://www.rubyonrailstutor.com/join.json",
          <!-- url: "http://localhost:3000/join.json", -->
          data: {
            first_name: first, 
            last_name: last, 
            email: email,
            twitter: twitter,
            applied: "false"},
          dataType: "JSON",
          success: function (d) {
            context.find(".subscribe")
              .removeClass("error")
              .addClass("success")
              .text("PERFECT!")
          },
          error: function (d) {
            context.find(".subscribe")
              .removeClass("success")
              .addClass("error")
              .text("try again!")
          }
        });
      });
    }

    submitEmail()
  })();
</script>
{% if page.comments %}{% include disqus_comments.html %}{% endif %}
